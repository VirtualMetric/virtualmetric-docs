# Troubleshooting Devices

This guide addresses common issues and problems that may occur when managing devices in DataStream. Devices are the entry points for data collection, so proper troubleshooting is essential for maintaining consistent data flow and system reliability.

## Device Connection Issues

### Connection Failures

**Problem:** Device cannot establish or maintain connection with directors.

**Symptoms:**
- Device shows "Connection Failed" or "Error" status
- Data not flowing from device to directors
- Intermittent connectivity issues
- Connection timeouts or dropped connections

**Solutions:**
- **Network Connectivity**: Verify network connectivity between device and directors
- **Port Availability**: Ensure configured ports are not blocked by firewalls or in use by other services
- **Authentication**: Verify credentials and certificates are correctly configured
- **Director Status**: Confirm target directors are active and operational
- **DNS Resolution**: Check hostname resolution if using domain names
- **Network Redundancy**: Test alternative network paths if configured

### Port Conflicts

**Problem:** Device configuration conflicts with existing port assignments.

**Symptoms:**
- System validation errors during device creation or editing
- "Port already in use" error messages
- Device fails to start or bind to configured port

**Solutions:**
- **Port Validation**: Use system validation to identify conflicting port assignments
- **Unique Port Assignment**: Ensure each device uses unique port numbers
- **Port Scanner**: Check system for active port usage before configuration
- **Alternative Ports**: Use different port numbers to avoid conflicts
- **Service Conflicts**: Identify and resolve conflicts with other system services

## Windows Agent Issues

### Agent Installation Problems

**Problem:** Windows Agent installation fails or cannot complete.

**Symptoms:**
- Installation process stops unexpectedly
- Agent shows "Loading State" indefinitely
- Installation complete but agent non-functional

**Solutions:**
- **Administrative Privileges**: Ensure installation account has administrative rights
- **System Resources**: Verify target system has adequate CPU, memory, and disk space
- **Windows Version**: Confirm Windows version compatibility with agent requirements
- **Security Software**: Check if antivirus or security software is blocking installation
- **Service Dependencies**: Verify required Windows services are running

### Agent Connection Issues

**Problem:** Agent shows "installed but not connected" status.

**Symptoms:**
- Installation completes successfully but connection remains pending
- Agent appears in interface but shows disconnected status
- Connection failure messages in agent logs

**Solutions:**
- **Wait Period**: Allow 2-5 minutes for initial connection establishment (this is normal)
- **Director Connectivity**: Verify network connectivity between agent system and assigned director
- **Director Status**: Confirm assigned director is active and accepting connections
- **Firewall Rules**: Check firewall configuration on both agent system and director
- **Service Status**: Verify agent service is running on target system
- **Diagnostic Information**: Review system-provided diagnostic information and troubleshooting guidance

### Agent Log Selection Issues

**Problem:** Agent not collecting expected log sources or missing data.

**Symptoms:**
- Expected logs not appearing in data streams
- Partial log collection from configured sources
- Performance impact from excessive log collection

**Solutions:**
- **Log Source Configuration**: Review and verify selected log sources in agent configuration
- **Event Log Permissions**: Ensure agent service has permissions to read required event logs
- **Custom Log Paths**: Verify custom log file paths are accessible and correct
- **Event ID Filters**: Check event ID filters for accuracy and completeness
- **Performance Counters**: Validate performance counter configuration and permissions
- **System Impact**: Monitor system performance impact of extensive log collection

## Push Device Issues

### Protocol-Specific Problems

#### Syslog Device Issues
- **Message Format**: Verify syslog message format compliance (RFC 3164/5424)
- **Facility/Severity**: Check facility and severity level configuration
- **Character Encoding**: Ensure proper character encoding (UTF-8, ASCII)
- **Message Size**: Verify message size doesn't exceed configured limits

#### HTTP Device Issues
- **Content Type**: Verify HTTP content type headers are correctly set
- **Authentication**: Check HTTP authentication methods (Basic, Bearer token)
- **SSL/TLS**: Validate SSL certificate configuration and trust chains
- **Request Format**: Ensure HTTP request format matches device expectations

#### TCP/UDP Device Issues
- **Connection Limits**: Check if connection limits are exceeded
- **Buffer Sizes**: Verify buffer sizes are appropriate for data volume
- **Timeout Settings**: Adjust timeout values based on network conditions
- **Connection Persistence**: Configure connection persistence settings appropriately

## Device Performance Issues

### High Resource Usage

**Problem:** Device consuming excessive system resources.

**Symptoms:**
- High CPU or memory usage on device host
- System performance degradation
- Slow data processing

**Solutions:**
- **Buffer Tuning**: Adjust buffer sizes based on data volume and available resources
- **Connection Limits**: Configure appropriate connection limits for system capacity
- **Data Volume**: Monitor and potentially limit data volume if exceeding capacity
- **Resource Monitoring**: Implement monitoring for CPU, memory, and network usage
- **Performance Optimization**: Review device configuration for optimization opportunities

### Data Processing Delays

**Problem:** Significant delays in data processing or transmission.

**Symptoms:**
- Delayed data appearance in targets
- Data backlog or queuing issues
- Inconsistent data flow rates

**Solutions:**
- **Network Performance**: Check network bandwidth and latency between components
- **Director Capacity**: Verify assigned directors have adequate processing capacity
- **Batch Processing**: Optimize batch sizes for better throughput
- **Load Balancing**: Distribute load across multiple directors if available
- **Configuration Review**: Review device configuration for performance bottlenecks

## Device Configuration Issues

### Cloning Problems

**Problem:** Device cloning fails or produces incorrect configuration.

**Symptoms:**
- Cloning process reports errors
- Cloned device has incorrect settings
- Port conflicts during cloning

**Solutions:**
- **Unique Parameters**: Ensure unique parameters (name, ports, IPs) are updated in cloned device
- **Port Validation**: Use system validation to prevent port conflicts during cloning
- **Configuration Review**: Verify all configuration parameters in cloned device
- **Network Settings**: Update network settings for target environment
- **Agent Limitations**: Remember that Windows Agents cannot be cloned

### Multi-Director Configuration Issues

**Problem:** Device multi-director configuration not working properly.

**Symptoms:**
- Uneven load distribution across directors
- Failover not functioning as expected
- Connection issues with specific directors

**Solutions:**
- **Director Status**: Verify all configured directors are active and healthy
- **Load Balancing**: Check load balancing algorithm configuration
- **Health Checks**: Implement proper health checks for director availability
- **Failover Testing**: Test failover scenarios to ensure proper functionality
- **Configuration Consistency**: Ensure consistent configuration across all directors

## Monitoring and Diagnostics

### Device Status Monitoring

- **Status Indicators**: Monitor device status (Enabled, Disabled, Error, Pending)
- **Connection Health**: Track connection quality and stability
- **Data Flow Metrics**: Monitor data throughput and processing rates
- **Error Rates**: Track failed connections or processing errors
- **Performance Metrics**: Monitor resource usage and performance indicators

### Log Analysis

- **Device Logs**: Review device-specific logs for error messages and patterns
- **Director Logs**: Check director logs for device-related issues
- **System Logs**: Analyze system logs on device host for underlying issues
- **Network Logs**: Review network logs for connectivity problems

## Prevention and Best Practices

### Proactive Monitoring
- **Regular Health Checks**: Schedule routine device health verification
- **Performance Monitoring**: Track device performance metrics continuously
- **Alert Configuration**: Set up automated alerts for device issues
- **Capacity Planning**: Monitor resource utilization and plan for growth

### Configuration Management
- **Documentation**: Maintain comprehensive device configuration documentation
- **Change Control**: Implement proper change management for device modifications
- **Testing Procedures**: Test device changes in non-production environments first
- **Backup Configurations**: Keep backups of working device configurations

### Security and Maintenance
- **Regular Updates**: Keep device software and configurations updated
- **Security Audits**: Regular security reviews of device configurations
- **Access Control**: Implement proper access controls for device management
- **Credential Management**: Regularly rotate credentials and certificates

## When to Contact Support

Contact support when:
- Issues persist after following troubleshooting procedures
- Device hardware or software appears to be malfunctioning
- Security-related problems are encountered
- System-wide device issues affect multiple installations
- Complex multi-device deployment problems occur
- Agent installation consistently fails on specific systems
