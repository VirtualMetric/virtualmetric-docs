---
description: Expands names containing dots
---

# Dot Expander

## Synopsis

```yaml {2}
dot_expander:
  - field: <ident>
  - path: <string>
  - description: <text>
  - if: <script>
  - ignore_failure: <boolean>
  - on_failure: <processor[]>
  - on_success: <processor[]>
  - tag: <string>
```

## Description

**Functionality**: Expands fields containing dots in their names into nested object structures.

## Parameters

|Field|Required|Default|Description|
|---|---|---|---|
|`field`|Y|-|Field containing dots to be expanded into a nested structure|
|`path`|N|-|Target field path for the expanded structure|
|`description`|N|-|Explanatory note|
|`if`|N|-|Condition to run|
|`ignore_failure`|N|`false`|If `true`, errors are ignored and processing continues|
|`on_failure`|N|-|See [Handling Failures](../handling-failures.mdx)|
|`on_success`|N|-|See [Handling Success](../handling-success.mdx)|
|`tag`|N|-|Identifier|

## Details

This processor is particularly useful when you need to convert flat field names with dots into hierarchical data structures that can be more easily processed by other processors. For example, `foo.bar.baz: 123` becomes `foo: { bar: { baz: 123 } }`.

:::note
Use the `ignore_failure` flag if the field may not contain dots, the field may not exist, or errors may occur during expansion.
:::

:::warning
The field name must contain at least one dot. The original field is removed after expansion, and all values are preserved as their original types during expansion. If `path` is specified, the expanded structure is placed at that location.
:::

## Examples

### Basic Expansion

<ExampleGrid>
  <CommentCol>
    Expanding a dotted field into nested objects...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "foo.bar.baz": 123
    }
    ```
    ```yaml
    dot_expander:
      - field: foo.bar.baz
    ```
  </CodeCol>
  <CommentCol>
    creates a nested structure:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "foo": {
        "bar": {
          "baz": 123
        }
      }
    }
    ```
  </CodeCol>
</ExampleGrid>

### Custom Path

<ExampleGrid>
  <CommentCol>
    Specifying a path...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "source.field.value": 123
    }
    ```
    ```yaml
    dot_expander:
      - field: source.field.value
      - path: target
    ```
  </CodeCol>
  <CommentCol>
    creates the expanded structure at that location:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "target": {
        "source": {
          "field": {
            "value": 123
          }
        }
      }
    }
    ```
  </CodeCol>
</ExampleGrid>

### Conditionals

<ExampleGrid>
  <CommentCol>
    Specifying a condition...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "foo.bar.baz": 123,
      "condition": true
    }
    ```
    ```yaml
    dot_expander:
      - field: foo.bar.baz
      - if: ctx.condition == true
    ```
  </CodeCol>
  <CommentCol>
    expands the field only when that condition is met:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "condition": true,
      "foo": {
        "bar": {
          "baz": 123
        }
      }
    }
    ```
  </CodeCol>
</ExampleGrid>

### Error Handling

<ExampleGrid>
  <CommentCol>
    If the field doesn't contain dots...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "foo": 123
    }
    ```
    ```yaml
    dot_expander:
      - field: foo
      - ignore_failure: true
    ```
  </CodeCol>
  <CommentCol>
    the raised error is ignored:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "foo": 123,
      "error": {
        "message": "field 'foo' does not contain dots"
      }
    }
    ```
  </CodeCol>
</ExampleGrid>
