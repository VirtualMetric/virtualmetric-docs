import Link from '@docusaurus/Link';

# Single Node Deployment

To download, install, and run **VirtualMetric** binaries **Director** and **Agent**, follow the instructions in the relevanet sections below.

## System Requirements

**VirtualMetric** supports the `amd64` and `arm64` versions of **Windows**, **Linux**, and **macOS**. Its minimum requirements are:

- **CPU**: **1 core** - We recommend using a machine with at least **2 CPU cores**. As our system uses a _vectorized pipeline_ and can utilize all available cores, having multiple cores will improve performance
- **Memory**: **150MB** - Depending on the volumes you need to handle, more memory will improve performance
- **Disk**: **250MB** - Depending on the amount of temporary data you need storage, more disk space will improve performance

  If you need to retain logs for extended periods or minimize potential data loss in case of unexpected failures, consider allocating additional disk space accordingly.

## Director

**Director** is a single binary that requires no dependencies, so you can easily download and place it anywhere on your system. It can be installed on a traditional server, on an on-premises virtual machine, or in the cloud. It can also be deployed as an [**Azure App**](./deployment/on-azure-app-service.mdx) for a serverless configuration.

### Installation

You can install **Director** online or offline, depending on your system's internet access.

:::warning[attention]
**Director**  does _not_ require administrative privileges to run as a background process. However, if you want to run it as a _service_, administrative privileges are required for installing it. Once installed, you can run it as a service with regular user privileges.
:::

This guide assumes you are installing **Director** as a _service_. If you do not have the necessary privileges to run it as a service, you can configure **Director** to run as a **Scheduled Task** (on Windows) or a **Cron job** (on Linux/macOS) to ensure it starts automatically after a reboot.

#### Online

If your system has internet access, you can use our automated installation scripts for a quick setup.

:::note
The `dl.vget.me` file contains our official installation script that performs the steps listed below.
:::

<Tabs groupId="cli-options">
  <TabItem value="powershell" label="PowerShell" default>  
    To run as a background process:

    ```PowerShell
    iwr dl.vget.me | iex
    ```

    To install as a service:

    ```PowerShell
    $p="C:\Program Files\VirtualMetric"; iwr dl.vget.me | iex
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">  
    To run as a background process:

    ```bash
    curl -sL dl.vget.me | bash
    ```

    To install as a service:

    ```bash
    curl -sL dl.vget.me | p="/opt/virtualmetric" bash
    ```
  </TabItem>
</Tabs>

The script will

- detect your operating system and architecture
- download the appropriate version
- install and configure the binary based on your selected method (service or background process)
- launch the executable

#### Offline

For systems without internet access, you can download and install **Director** manually. Choose the appropriate binary for your system from the table below:

<table style={{textAlign: "center"}}>
  <tr><th>Operating System</th><th>Download Link</th></tr>
  <tr>
    <td rowspan="2">Windows</td>
   <td><a href="https://dl.vget.me/director/windows/amd64/vmetric-director.exe">**Director** for AMD64</a></td>
   </tr>
  <tr><td><a href="https://dl.vget.me/director/windows/arm64/vmetric-director.exe">**Director** for ARM64</a></td></tr>
  <tr>
    <td rowspan="2">Linux</td>
    <td><a href="https://dl.vget.me/director/linux/amd64/vmetric-director">**Director** for AMD64</a></td>
  </tr>
  <tr><td><a href="https://dl.vget.me/director/linux/arm64/vmetric-director">**Director** for ARM64</a></td></tr>
  <tr>
    <td rowspan="2">macOS</td>
    <td><a href="https://dl.vget.me/director/darwin/amd64/vmetric-director">**Director** for AMD64</a></td>
  </tr>
  <tr><td><a href="https://dl.vget.me/director/darwin/arm64/vmetric-director">**Director** for ARM64</a></td></tr>
</table>

Once you have downloaded the binary, open a terminal with admin privileges. Create the directory where you want to run **Director** (we will refer to that directory as `<vm_root>`), and copy the downloaded binary to it. Then, navigate to that directory.

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    mkdir "C:\Program Files\VirtualMetric"
    cp C:\Users\<user>\Downloads\vmetric-director.exe "C:\Program Files\VirtualMetric"
    ```
  </TabItem>

  <TabItem value="bash" label="Bash">
    On **Linux**:

    ```bash
    mkdir /opt/virtualmetric
    cp ./vmetric-director /opt/virtualmetric
    ```

    On **macOS**:

    ```bash
    mkdir /Applications/VirtualMetric
    cp ./vmetric-director /Applications/VirtualMetric
    ```
  </TabItem>
</Tabs>

If you don't have enough privileges to start the service, you can run **Director** as a background process:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    .\vmetric-director -background
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    ./vmetric-director -background
    ```
  </TabItem>
</Tabs>

If you _do_ have the required privileges, you can start **Director** as a service by running the following commands:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    .\vmetric-director -service install
    .\vmetric-director -service start
    Get-Process | select-string "director"

    System.Diagnostics.Process (vmetric-director)
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    ./vmetric-director -service install
    ./vmetric-director -service start
    ```
  </TabItem>
</Tabs>

### Post-Installation

After completing the above steps, if you have installed **Director** as a service, you can verify its status by using the following command:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    Get-Service vmetric-director
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    systemctl status vmetric-director
    ```
  </TabItem>
</Tabs>

---

## Agent

**Agent** is a single binary that requires no dependencies, so you can easily download and place it anywhere on your system. It can be installed on a traditional server, on an on-premises virtual machine, or in the cloud. It can also be deployed as an [**Azure App**](./deployment/on-azure-app-service.mdx) for a serverless configuration.

### Installation

You can install **Agent** online or offline, depending on your system's internet access.

:::warning[attention]
**Agent**  does _not_ require administrative privileges to run as a background process. However, if you choose to install it as a _service_, administrative privileges are required. Once installed, you can run it with regular user privileges.
:::

This guide assumes you are installing **Agent** as a _service_. If you do not have the necessary privileges to run it as a service, you can configure **Agent** to run as a **Scheduled Task** (on Windows) or a **Cron job** (on Linux/macOS) to ensure it starts automatically after a reboot.

#### Online

If your system has internet access, you can use our automated installation scripts for a quick setup.

:::note
The `dl.vget.me` file contains our official installation script that performs the steps listed below.
:::

<Tabs groupId="cli-options">
  <TabItem value="powershell" label="PowerShell" default>  
    To run as a background process:

    ```PowerShell
    iwr dl.vget.me | iex
    ```

    To install as a service:

    ```PowerShell
    $p="C:\Program Files\VirtualMetric"; iwr dl.vget.me | iex
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">  
    To run as a background process:

    ```bash
    curl -sL dl.vget.me | bash
    ```

    To install as a service:

    ```bash
    curl -sL dl.vget.me | p="/opt/virtualmetric" bash
    ```
  </TabItem>
</Tabs>

The script will

- detect your operating system and architecture
- download the appropriate version
- install and configure the binary based on your selected method (service or background process)
- launch the executable

#### Offline

For systems without internet access, you can download and install **Agent** manually. Choose the appropriate binary for your system from the table below:

<table style={{textAlign: "center"}}>
  <tr><th>Operating System</th><th>Download Link</th></tr>
  <tr>
    <td rowspan="2">Windows</td>
   <td><a href="https://dl.vget.me/agent/windows/amd64/vmetric-agent.exe">**Agent** for AMD64</a></td>
   </tr>
  <tr><td><a href="https://dl.vget.me/agent/windows/arm64/vmetric-agent.exe">**Agent** for ARM64</a></td></tr>
  <tr>
    <td rowspan="2">Linux</td>
    <td><a href="https://dl.vget.me/agent/linux/amd64/vmetric-agent">**Agent** for AMD64</a></td>
  </tr>
  <tr><td><a href="https://dl.vget.me/agent/linux/arm64/vmetric-agent">**Agent** for ARM64</a></td></tr>
  <tr>
    <td rowspan="2">macOS</td>
    <td><a href="https://dl.vget.me/agent/darwin/amd64/vmetric-agent">**Agent** for AMD64</a></td>
  </tr>
  <tr><td><a href="https://dl.vget.me/agent/darwin/arm64/vmetric-agent">**Agent** for ARM64</a></td></tr>
</table>

Once you have downloaded the binary, open a terminal with admin privileges&mdash;i.e. as _Administrator_ on **Windows**, as _sudo_ on **Linux**, or as _root_ on **macOS**. Create the directory where you want to run **Agent** (we will refer to that directory as `<vm_root>`), and copy the downloaded binary to it. Then, navigate to that directory.

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    mkdir "C:\Program Files\VirtualMetric"
    cp C:\Users\<admin-user>\Downloads\vmetric-agent.exe "C:\Program Files\VirtualMetric"
    ```
  </TabItem>

  <TabItem value="bash" label="Bash">
    On **Linux**:

    ```bash
    mkdir /opt/virtualmetric
    cp ./vmetric-agent /opt/virtualmetric
    ```

    On **macOS**:

    ```bash
    mkdir /Applications/VirtualMetric
    cp ./virtualmetric-agent /Applications/VirtualMetric
    ```
  </TabItem>
</Tabs>

If you don't have enough privileges to start the service, you can run **Agent** as a background process:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    .\vmetric-agent -background
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    ./vmetric-agent -background
    ```
  </TabItem>
</Tabs>

If you _do_ have the required privileges, you can start **Agent** as a service by running the following commands:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    .\vmetric-agent -service install
    .\vmetric-agent -service start
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    ./vmetric-agent -service install
    ./vmetric-agent -service start
    ```
  </TabItem>
</Tabs>

### Post-Installation

After completing the above steps, if you have installed **Agent** as a service, you can verify its status by using the following command:

<Tabs>
  <TabItem value="powershell" label="PowerShell" default>
    ```PowerShell
    Get-Service vmetric-agnet
    ```
  </TabItem>
  <TabItem value="bash" label="Bash">
    ```bash
    systemctl status vmetric-agent
    ```
  </TabItem>
</Tabs>

<Link to="./introduction#yaml-files" className="button button--primary" style={{ width: '400px', display: 'inline-block', textAlign: 'center'}}>Back To Introduction</Link>
