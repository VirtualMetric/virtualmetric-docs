# Example: Forwarding Data

This section will help you get started with targets to write processed data to specific formats, walking you through common use cases.

## Scenarios

In this section, we will send the data we receive from _Syslog_ to these destinations:

* **Console**: the data will be normalized to ECS
* **Storage File**: the data will be normalized to a specific file storage format

## Console Setup

The most basic target we can direct our output to is a _console_. For this purpose, we have to create a simple configuration:

```yaml
targets:
  - name: to_console
    type: console
    properties:
      format: "ecs"
```

Here, we named our target as `to_console`. Its type is `console`, and we intend to normalize the data to the [ECS](../appendix.mdx#ecs) format, although this is optional.

Put this in a file named `to-console.yml`, and place it in our [working directory](./configuration-basics.mdx#working-directory).

To see the data directed to the console, enter the following command line in your terminal:

  <Tabs>
    <TabItem value="windows" label="Windows">
      ```PowerShell
      .\vmetric-director -console
      ```
    </TabItem>
    <TabItem value="linux" label="Linux">
      ```bash
      ./vmetric-director -console
      ```
    </TabItem>
    <TabItem value="macos" label="macOS">
      ```bash
      ./vmetric-director -console
      ```
    </TabItem>
  </Tabs>

Press <kb-short>Ctrl+C</kb-short> to exit the process.

## Storage File Setup

The next type of output we can use is a file. Various formats are available in **DataStream**:

* The widely used **JSON** format:

  ```yaml
  targets:
    - name: to_json
      type: file
      properties:
        location: "<vm_root>/config/Examples"
        type: "json"
        name: "logs_{{.Year}}_{{.Month}}_{{.Day}}.json"
  ```

  The nested `name` parameter is for the file in which we will store our output data. We intend to create a storage file name based on the internal field values of `Year`, `Month`, and `Day`.

  The `path` we have specified for `location` is where the JSON file will be created.

  Put this configuration in a file named `to-json.yml` and place it our working directory.

* The **Parquet** format:

  ```yaml
  targets:
    - name: to_parquet
      type: file
      properties:
        location: "<vm_root>/config/Examples"
        format: "parquet"
        compression: "zstd"
        schema: |
          {
            "timestamp": {
              "type": "INT",
              "bitWidth": 64,
              "signed": true
            },
            "message": {
              "type": "STRING",
              "compression": "ZSTD"
            }
          }
  ```

  This describes the `schema` of the parquet file we will create, i.e. the layout of the data to be stored, which we have specified in JSON syntax. Also, we are using _ZSTD_ compression, although this is optional. Finally, the output file will be placed in our working directory which we have specified with `location`.

  Put this configuration in a file named `to-parquet.yml` and place it our working directory.

Now we have to configure a route:

```yaml
routes:
  - name: syslog_to_file
    devices:
      - id: 1
        name: from_syslog
        type: syslog
    targets:
      - name: to_json
```

Note that we configured a simple device named `from_syslog`. We have also opted for the JSON file configuration.

Put this in a file named `syslog-to-file.yml` and place in our working directory. 

To have the _syslog_ data directed to the storage file we have configured, enter the following command line in your terminal:

  <Tabs>
    <TabItem value="windows" label="Windows">
      ```PowerShell
      .\vmetric-director -mode=route -name=syslog_to_file
      ```
    </TabItem>
    <TabItem value="linux" label="Linux">
      ```bash
      ./vmetric-director -mode=route -name=syslog_to_file
      ```
    </TabItem>
    <TabItem value="macos" label="macOS">
      ```bash
      ./vmetric-director -mode=route -name=syslog_to_file
      ```
    </TabItem>
  </Tabs>

Press <kb-short>Ctrl+C</kb-short> to exit the process.

## Monitoring

To monitor the stream, check **Director**'s logs&mdash;those under the directory indicated [here](./configuration-basics.mdx#logging-setup)&mdash;for initialization messages, upload/ingestion status, buffer sizes, and number of retries.

:::tip
File targets with no messages are automatically cleaned up when disposed.
:::

---

In the next section, we will learn how to combine _devices_ and _targets_ using routes.
