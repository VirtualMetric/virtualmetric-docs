---
sidebar_label: Configuration Basics
---

# Getting Started: Configuration Basics

The purpose of this section is to introduce you to **VirtualMetric Director**'s configuration logic, and to provide a basic understanding of how it works.

## The Components

**Director** uses the following types of configurable components to collect data points, to process them, and to forward them to destinations:

* **Devices** - Data sources that collect or receive data. For a detailed discussion, see [Devices: Overview](../configuration/devices/index.mdx#configuration).

* **Targets** - Destinations where processed data is sent. For a detailed discussion, see [Targets: overview](../configuration/targets/index.mdx#configuration).

* **Pipelines** - String of processors that transform the data. For a detailed discussion, see [Pipelines: Overview](../configuration/pipelines/index.mdx#configuration).

* **Routes** - Predefined data flows from devices through pipelines to targets. For a detailed discussion, see [Routes: Overview](../configuration/routes.mdx#configuration).

  :::tip[info]
  To see the results of ingesting a specific source stream, processing it, and forwarding the output to a specifi destination, routes _must_ be configured, combining the relevant components (devices, targets, and pipelines) and orchestrating their flow!
  :::

The examples cover the basic forms of each of these components.

## The Configuration Files

To configure the above-mentioned components for telemetry streams, we use YAML files.

:::tip
To learn where these files are placed and how they can be arranged, review [**this section**](../configuration/index.mdx#managing-yaml-files).
:::

To illustrate, in order to ingest data in _Syslog_ format and send it to the console, you will need the following configurations&mdash;here placed in separate YAML files under the `<vm_root>/config` directory:

<ExampleGrid>
  <CommentCol>
    The **device**: defines the type of log format, and the protocol and port to use to ingest it
  </CommentCol>
  <CodeCol>
    ```yaml title="from-syslog.yml"
    devices:
      - id: 1
        name: from_syslog
        type: syslog
        properties:
          protocol: udp
          address: 0.0.0.0
          port: 514
    ```
  </CodeCol>
  <CommentCol>
    The **target**: defines the type and format of the output medium the data will be directed to
  </CommentCol>
  <CodeCol>
    ```yaml title="to-console.yml"
    targets:
      - name: to_console
        type: console
        properties:
          format: "ecs"
    ```
  </CodeCol>
  <CommentCol>
    The **route**: combines the _device_ with the _target_
  </CommentCol>
  <CodeCol>
    ```yaml title="syslog-to-console.yml"
    routes:
      - name: syslog_to_console
        devices:
          - name: from_syslog
        targets:
          - name: to_console
    ```
  </CodeCol>
</ExampleGrid>

:::tip
When configuring a pipeline, even though devices require an integer-valued `id` parameter, we use the identifiers in the `name` fields of all components.
:::

 **Director** iterates the folder tree under `config`, scanning each `*.yml` file to spot the route you want to run&mdash;here `simple_route`.

 :::note[info]
 **Director** does _not_ care about the filenames you use. That is only for your convenience, to organize your components as you see fit. It only cares about the identifiers you use for the components, i.e. the `id` value for devices and the `name` value for the others.
 :::

The examples provide the basic configurations required for some of the most frequently used processes.

:::note
Although it is possible to mix device, target, pipeline, and route definitions arbitrarily in YAML files, for the sake of clarity we will keep them in separate files in our presentation.
:::

## The CLI

The configured components can be run by invoking **Director** from the terminal. For a detailed description of the command line functionality, see the [**Overview**](../cli/director.mdx) chapter.

:::tip
For convenience, you may want to add **VirtualMetric**'s root folder to your `$PATH` environment variable. Otherwise, to invoke the binaries from the CLI, you must navigate to that folder and use the platform-specific syntax (i.e. "`.\`" for Windows, "`./`" for Unix-based systems).
:::

Running configurations&mdash;for example, the route `syslog_to_console` we have configured above&mdash;or validating them before the run involves invoking **Director** from the command line like so:

<Tabs>
  <TabItem value="windows" label="Windows" default>
    Launch service:

    ```powershell
    vmetric-director
    ```

    Validate a configuration:

    ```powershell
    vmetric-director -validate
    ```
  </TabItem>    
  <TabItem value="linux" label="Linux">
    Launch service:

    ```bash
    vmetric-director
    ```

    Validate a configuration:

    ```bash
    vmetric-director -validate
    ```
  </TabItem>
  <TabItem value="macos" label="macOS">
    Launch service:

    ```bash
    vmetric-director
    ```

    Validate a configuration:

    ```bash
    vmetric-director -validate
    ```
  </TabItem>
</Tabs>

**Director** parses all the YAML files under `config` and runs them. The examples provide the required switches if a specific one needs to be used.

To simulate some sample data streams, we provide **Director**'s companion utility: **Generator**. A typical use of it will be sending messages to a specific logging service, although other traditional tools can also be used for this on some Unix-based platforms:

<Tabs>
  <TabItem value="windows" label="Windows" default>
    ```powershell
    vmetric-generator -mode=syslog -address="127.0.0.1:514" -message="Text message"
    ```
  </TabItem>    
  <TabItem value="linux" label="Linux">
    ```bash
    logger -n 127.0.0.1 -P 514 "Text message"
    ```
  </TabItem>
  <TabItem value="macos" label="macOS">
    ```bash
    logger -n 127.0.0.1 -P 514 "Text message"
    ```
  </TabItem>
</Tabs>

Press <kb-short>Ctrl+C</kb-short> to terminate either program and exit the process.

## Working Directory

For our purposes, and to keep things simple, we will be using the following folder as our working directory:

<Tabs>
  <TabItem value="windows" label="Windows" default>
    ```powershell
    C:\Path\To\<vm_root>\config\Examples
    ```
  </TabItem>    
  <TabItem value="linux" label="Linux">
    ```bash
    /usr/bin/path/to/<vm_root>/config/Examples
    ```
  </TabItem>
  <TabItem value="macos" label="macOS">
    ```bash
    /Applications/Path/To/<vm_root>/config/Examples
    ```
  </TabItem>
</Tabs>

We will be saving all our configuration files in this folder. We will also specify our output files to be created here.

## Logging Setup

Finally, a simple configuration for logging is in order for you to be able to check the status of your runs.

* Go to `<vm_root>` (i.e. the folder where you have placed **VirtualMetric**)
* Find the `config` directory, which is directly under `<vm_root>`
* Open the file named `vmetric.yml`, -or- create it if it doesn't exist
* Make sure the settings match the following, -or- add them to the newly created file:

```yaml
debug:
  log:
    status: true
  level: 4
  console:
    status: true
```

**Director** will generate the log of your runs and place it in the following file:

<Tabs>
  <TabItem value="windows" label="Windows" default>
    ```powershell
    C:\Path\To\<vm_root>\storage\logs\debug.log
    ```
  </TabItem>

  <TabItem value="linux" label="Linux">
    ```bash
    /usr/bin/path/to/<vm_root>/storage/logs/debug.log
    ```
  </TabItem>

  <TabItem value="macos" label="macOS">
    ```bash
    /Applications/Path/To/<vm_root>/storage/logs/debug.log
    ```
  </TabItem>
</Tabs>

You can delete this file if you want to. So long as the above debugging setting remains, it will be re-created with each run.

---

Now you are ready to see **Director** in action. First, we will see how to ingest data using a _device_.
