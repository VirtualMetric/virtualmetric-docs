import Synopsis from "@site/src/components/Synopsis";

# Circle

<Synopsis>
Converts shapes defined as circles to approximate polygons.
</Synopsis>

:::warning[attention]
Circles containing poles cannot be converted.
:::

## Parameters

|Field|Required|Default|Description|
|---|---|---|---|
|`error_distance`|Y|-|The difference between the polygon's center to the sides and the circle's radius. This is measured in meters with `geo_shape`, but unitless for `shape`|
|`field`|Y|-|The field containing the circle to be converted. A **WKT** string or a **GeoJSON** map|
|`shape_type`|Y|-|The field mapping type to use for conversion: `geo_shape` or `shape`|
|`description`|N|-|Explanatory text|
|`if`|N|-|Condition to run|
|`ignore_failure`|N|`false`|See [Handling Failures](../handling-failures.mdx)|
|`ignore_missing`|N|||
|`on_failure`|N|-|See [Handling Failures](../handling-failures.mdx)|
|`on_success`|N|-|See [Handling Success](../handling-success.mdx)|
|`tag`|N|-|Identifier|
|`target_field`|N|-|The field to assign the converted shape to. If omitted, the circle is converted in place|

## Examples

In **JSON**:

```js
{
   "mappings": {
      "properties": {
         "circle": {
            "type": "geo_shape"
         }
      }
   }
}

PUT data/conversions/polygonize_circles
{
   "description": "Convert circle to polygon",
   "processors": [
      {
         "circle": {
            "field": "circle",
            "error_distance": 14.0,
            "shape_type": "geo_shape"
         }
      }
   ]
}
```

In **WKT**:

```wkt
PUT data/conversions/1?pipeline=polygonize_circles
{
   "circle": "CIRCLE (20 5 25)"
}

GET data/conversions/1
```

With this pipeline, a document containing a circle, represented in either **WKT** or **GeoJSON**, can be assigned to the `circles` index and tranformed into a polygon in the source format.
