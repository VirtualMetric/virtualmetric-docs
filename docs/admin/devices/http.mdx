import BasicConfig from "./_basic-config.mdx";

# HTTP

## Synopsis

```ssml {5}
- id: <numeric>
  name: <ip-numeric>
  description: <text>
  type: http
  status: <boolean>
  properties:
    address: <string>
    port: <numeric>
    tls: <boolean>
    cert_name: <string>
    key_name: <string>
    url: <string>
    content_type: <string>
    response:
      code: <enum-numeric>
      body: <string>
      content_type: <string>
    flush_interval: <numeric>
    queue:
      interval: <numeric>
    batch_size: <numeric>
```

## Description

Represents the listener that delivers data from HTTP-based web data streams. Expects POST requests containing a JSON body, and the body to be an object or array of objects.

Multiple HTTP devices can be assigned to a single addres and port since the device will resolve requests based on the URL configuration. All devices must, however, use the same TLS configuration, and be enabled or disabled as such.

## Parameters

<BasicConfig />

### `properties:`

Device-specific settings.

|Field|Required|Default|Description|
|---|---|---|---|
|`address`|N|`"0.0.0.0"`|Listening address|
|`port`|Y||Listening port|
|`tls`|N|`false`|Enables TLS connection|
|`cert_name`|N|`"cert.pem"`|TLS certificate file path|
|`key_name`|N|`"key.pem"`|TLS key file path|
|`url`|N|`"/"`|Listening path|
|`content_type`|N|`"application/json"`|Request content body MIME type|
|`flush_interval`|N|`1`|Ingester flush time interval in sec|
|`batch_size`|N|`1000`|Ingester batch size|

### `response:`

HTTP response settings.

|Field|Required|Default|Description|
|---|---|---|---|
|`code`|N|`200`|Response HTTP status code|
|`body`|N|`"{\"message\":\"success\"}"`|Response content body|
|`content_type`|N|`"application/json"`|Response content body MIME type|

### `queue:`

Ingester queue settings.

|Field|Required|Default|Description|
|---|---|---|---|
|`interval`|N|`1`|Ingester de-queue time interval in sec|

## Examples

* Basic listening:

<Details summary="Click to see">
```yaml
devices:
  - id:
    name: 127.0.0.1
    type: http
    status: true
    properties:
      address: "192.168.1.1"
      port: 8080
```
</Details>

* Basic response:

<Details summary="Click to see">
```yaml
devices:
  - id:
    type: http
    status: true
    properties:
      address: "192.168.1.1"
      port: 8080
    url: "/"
    response:
      code: 200
      body: "{\"message\":\"success\"}"
```
</Details>

* Something else:

<Details summary="Click to">
```yaml
devices:
  - id: 324233249
    name: 127.0.0.1
    description: http
    type: http
    status: false
    properties:
      address: "0.0.0.0"
      port: 0
      tls: false
      cert_name: ""
      key_name: ""
      url: ""
      content:
        type: ""
      response:
        code: 200
        body: ""
      flush_interval: 1
      queue:
        interval: 1
      batch_size: 1000
```
</Details>
