# HTTP

## Synopsis

```yaml
devices:
  - id: <numeric>
    name: <ip-numeric>
    description: <text>
    type: http
    status: <logical>
    properties:
      address: <string>
      port: <numeric>
      tls: <logical>
      cert_name: <string>
      key_name: <string>
      url: <string>
      content_type: <string>
      response:
        code: <enum-numeric>
        body: <string>
        content_type: <string>
      flush_interval: <numeric>
      queue:
        interval: <numeric>
      batch_size: <numeric>
```

## Description

Represents the listener that delivers data from HTTP-based web data streams. Expects POST requests containing a JSON body, and the body to be an object or array of objects.

## Parameters

|Field|Required|Default|Description|
|---|---|---|---|
|`id`|Y|N/A|Device id|
|`name`|Y|N/A|The IP to use to listen to the stream|
|`description`|N|-|Explanatory note|
|`type`|Y|N/A|Device type. Should be `http`|
|`status`|N|`false`|Enable device|

### `properties:`

|Field|Required|Default|Description|
|---|---|---|---|
|`address`|N|`"0.0.0.0"`|Listening address|
|`port`|Y|N/A|Listening port|
|`tls`|N|`false`|Enables TLS connection|
|`cert_name`|N|`"cert.pem"`|TLS certificate file path|
|`key_name`|N|`"key.pem"`|TLS key file path|
|`url`|N|`"/"`|Listening path|
|`content_type`|N|`"application/json"`|Request content body MIME type|
|`flush_interval`|N|`1`|Ingester flush time interval in sec|
|`batch_size`|N|`1000`|Ingester batch size|

### `response:`

|Field|Required|Default|Description|
|---|---|---|---|
|`code`|N|`200`|Response HTTP status code|
|`body`|N|`"{\"message\":\"success\"}"`|Response content body|
|`content_type`|N|`"application/json"`|Response content body MIME type|

### `queue:`

|Field|Required|Default|Description|
|---|---|---|---|
|`interval`|N|`1`|Ingester de-queue time interval in sec|

## Examples

### Basic Listening

```yaml
devices:
  - id: 1
    name: 127.0.0.1
    type: http
    status: true
    properties:
      address: "192.168.1.1"
      port: 8080
```

{/* ## Parameters

<dl>
	<dt>`batch_size`</dt>
	<dd>Ingester batch size</dd>
	<dd>_default_: `1000`</dd>

	<dt>`description`</dt>
	<dd>Explanatory note</dd>

	<dt>`flush_interval`</dt>
	<dd>Ingester flush interval</dd>
	<dd>_default_: `1` (sec)</dd>

	<dt>`id` _required_</dt>
	<dd>Device identifier</dd>

	<dt>`name`</dt>
	<dd>The IP number used to refer to the device</dd>
	<dd>_default_: `127.0.0.1`</dd>

	<dt>`properties`</dt>
	<hr style={{margin: "0px"}}/>
	<dd>
		<dt>`address`</dt>
		<dd>_default_: `"0.0.0.0"`</dd>

		<dt>`content`</dt>
    	<hr style={{margin: "0px"}}/>
		<dd>
			<dt>`type`</dt>
			<dd>Type of content to be extracted</dd>
			<dd>_default_: `"application/json"`</dd>
		</dd>

    <hr style={{margin: "0px"}}/>
		<dt>`port` _required_</dt>
		<dd>The port number to be used by the listener</dd>

		<dt>`queue`</dt>
		<hr style={{margin: "0px"}}/>
		<dd>
			<dt>`interval`</dt>
			<dd>Time interval to flush the queue</dd>
			<dd>_default_: `1` (sec)</dd>
		</dd>

    	<hr style={{margin: "0px"}}/>
		<dt>`response`</dt>
		<hr style={{margin: "0px"}}/>
		<dd>
			<dt>`body`</dt>
			<dd>Response content body sent by the server</dd>
			<dd>_default_: `""`</dd>

			<dt>`code`</dt>
			<dd>Response code sent by the server</dd>
			<dd>_default_: `200`</dd>
		</dd>
	</dd>

	<dt>`status`</dt>
	<dd>Enables the device</dd>
	<dd>_default_: `false`</dd>

</dl> */}

{/* TODO: Complete */}