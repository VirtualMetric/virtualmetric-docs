---
sidebar_label: Management
---

# Directors: Management

The **Directors** web interface provides comprehensive management capabilities for Director deployment, configuration, and monitoring through an intuitive graphical dashboard.

## Access

Navigate to **Home** > **Fleet Management** > **Directors**, or use the hamburger menu and select **Fleet Management** > **Directors**.

## Overview

The Directors dashboard provides centralized visibility and control over all Director instances across your infrastructure. Directors orchestrate data collection, processing, and routing, with support for distributed processing through Agent pre-processing capabilities.

### Table

The table displays **Name**, **Mode** (Managed/Self-Managed), **Installation Type** (Standalone/Cluster), **Status** (Enabled/Disabled), **Connection Status** (Connected/Not Connected), and an **Actions menu** (⋮) for each Director.

For **Self-Managed** Directors, a warning icon appears next to the Mode when configuration has changed. The tooltip reads "Configuration has changed and the current one has to be deployed" - download the updated configuration file and deploy to Director.

:::warning
When the configuration change indicator appears, the Director is running with an outdated configuration. Download and deploy the updated `vmetric.vmf` file promptly to ensure consistent behavior.
:::

### Table Controls

Filter Directors using **Search directors** (by name) and **Status** dropdown (All, Enabled, Disabled). The <gui>Refresh</gui> button reloads table data. Click <gui>Create director</gui> to launch the creation wizard (requires DIRECTOR_CREATE permission).

### Actions

Each Director row provides an **Actions menu** (⋮) with the following operations:

**View Details:**
- <gui>See details</gui> - Navigate to Director detail view

**Status Management:**
- <gui>Enable Director</gui> - Activate disabled Director
- <gui>Disable Director</gui> - Deactivate enabled Director

**Configuration:**
- <gui>Download Config</gui> - Download vmetric.vmf configuration file (Self-Managed only)

**Deletion:**
- <gui>Delete Director</gui> - Remove Director from platform

## Create Director Wizard

The Director creation process guides you through a 3-step wizard with validation and connection verification.

### Setup

**Director Configuration:**

1. **Director Name**
   - Enter unique identifier for the Director
   - Minimum length: 3 characters
   - Maximum length: 64 characters
   - Used for identification across the platform

2. **Installation Type Selection**

   Choose Director architecture using radio tiles:

   **Standalone:**
   - Single Director instance
   - Simplified management
   - Suitable for most deployments
   - Quick setup process

   **Cluster:**

   :::info
   To create a clustered deployment, first create Directors as standalone instances, then group them using the **Clusters** tab. See [Clusters](#clusters) section below.
   :::

   Clustered deployments provide high availability through multiple Director instances with automatic failover and load balancing.

3. **Mode Selection**

   Select management approach for the Director:

   **Managed:**
   - VirtualMetric manages Director infrastructure
   - Automated updates and maintenance
   - Proactive monitoring and support
   - Reduced operational overhead

   **Self-Managed:**
   - User controls Director deployment
   - Manual update management
   - Custom security configurations
   - Full infrastructure control
   - Standard deployment option

### Connect

**Installation Command Display:**

The final step provides platform-specific installation scripts and connection verification:

**Installation Scripts:**
- **PowerShell Script** - For Windows deployments
- **Bash Script** - For Linux/macOS deployments
- **Copy Button** - One-click copy to clipboard
- **API Key** - Auto-generated secure authentication key included in scripts

**Connection Verification:**

After running the installation script, verify Director connectivity:

**Connection Status Indicator:**
- **Connecting** - Director attempting initial connection
- **Success** - Director successfully connected to platform
- **Failed** - Connection attempt unsuccessful

**Progress Display:**
- Real-time connection status updates
- Visual indicators for each connection state
- Error messages for failed connections

**Completion Options:**

**Connected Successfully:**
- <gui>Complete Setup</gui> - Finalize and navigate to Director detail view
- Automatic redirect to Director detail page

**Not Yet Connected:**
- <gui>Connect Later</gui> - Save Director configuration without connection verification
- <gui>Complete Setup</gui> - Disabled until successful connection
- Return later to verify connection and complete setup

### Navigation

**Progress Indicator:**
- Visual step progress at top of wizard
- Click steps to navigate (forward only after validation)
- Current step highlighted
- Completed steps marked with checkmark
- Invalid steps marked with error indicator

**Navigation Buttons:**
- <gui>Cancel</gui>/<gui>Connect Later</gui> - Exit wizard (label changes on final step)
- <gui>Create Director</gui> - Advance to next step with validation
- <gui>Complete Setup</gui> - Finalize Director creation (final step)

## Detail View

Clicking a Director from the overview table opens the detailed management interface with three tabbed panels.

### Details Tab

**Director Information:**

View and edit Director configuration through editable tiles:

**General Information:**
- **Director Name** - Editable unique identifier
- **Mode** - Management type (Managed or Self-Managed)
- **Installation Type** - Architecture (Standalone or Cluster)
- **Status** - Current operational state
- **Connection Status** - Real-time connectivity indicator

**Edit Functionality:**
- <gui>Edit</gui> icon on tiles for inline editing
- <gui>Save</gui> changes with validation
- <gui>Cancel</gui> to discard modifications
- Real-time validation feedback

### Connection Details Tab

**Installation Command Panel:**

Access installation and reinstallation resources:

**Installation Scripts:**
- Platform-specific installation commands
- PowerShell script for Windows
- Bash script for Linux/macOS
- Copy button for easy clipboard access

**API Key Management:**
- Display current API key
- Regenerate API key when needed
- Update scripts with new key automatically

**Reinstallation Process:**
- Access reinstallation commands
- Use when Director needs redeployment
- Maintains configuration and settings
- Preserves Director identity and connections

### Activity Logs Tab

**Director Activity History:**

Track Director operations and lifecycle events through comprehensive activity logging:

**Activity Table Columns:**

| Column | Description |
|:-------|:------------|
| User | Email address of the user who performed the action (clickable link to user profile) |
| User IP | IP address from which the action was performed |
| Object Type | Entity type (always "Director" for this view) |
| Object | Name of the affected Director |
| Action | Operation performed (see Action Types below) |
| Action Description | Detailed description of the operation |
| Created At | Timestamp of when the action occurred |

**Action Types:**

| Action | Description |
|:-------|:------------|
| CreatedDirector | A new Director was created |
| UpdatedDirector | Director configuration was modified |
| DeletedDirector | A Director was removed |

**Table Features:**
- **Search** - Filter activities by any field content
- **Action Type Filter** - Multi-select filter to show specific action types
- **Timeframe Filter** - Filter by time period (Last 24 hours, Last 7 days, Last 30 days, Last 90 days, All time)
- **Pagination** - Navigate through large activity logs with configurable page sizes (10, 20, 30 items)

## Operations

### Enable / Disable

To change Director status:

1. Navigate to Director detail view or use the Actions menu from overview
2. Click **Actions** menu
3. Select <gui>Enable Director</gui> or <gui>Disable Director</gui>
4. Confirmation notification confirms the status change

Enabled Directors actively process data. Disabled Directors preserve configuration but stop all processing.

### Download Config

**For Self-Managed Directors:**

Download the current Director configuration file for deployment:

1. Navigate to Director detail view
2. Click **Actions** menu
3. Select <gui>Download Config</gui>
4. System downloads `vmetric.vmf` file to browser's Downloads directory
5. Deploy file to `<vm_root>/Director/config/` directory on Director server

**Configuration Update Workflow:**

When configuration changes occur:
- Warning icon appears next to "Self-managed" mode indicator
- Tooltip indicates deployment needed
- Download updated config file
- Replace existing config on Director server
- Restart Director service to apply changes

:::warning
Self-Managed Directors require a service restart after deploying configuration updates. Plan maintenance windows accordingly for production environments.
:::

### Delete

**Delete Director Process:**

Remove a Director from the platform with dependency checking:

1. Navigate to Director detail view (or use Actions menu from overview)
2. Click **Actions** menu
3. Select <gui>Delete Director</gui>
4. Deletion modal appears with confirmation

**Standard Deletion:**
- Confirm Director name matches
- Click <gui>Delete</gui> to proceed
- Success notification confirms deletion
- Redirect to Directors overview

**Deletion with Dependencies:**

If Director has active dependencies, error modal displays:

:::note
Directors with connected devices or agents cannot be deleted. The error modal lists all dependencies that must be reassigned or removed first.
:::

**Error Modal Contents:**
- "Cannot delete Director" message
- **Devices** - List of devices using this Director
- **Agents** - List of agents connected to this Director
- **Action Required** - Remove or reassign dependencies before deletion

**Dependency Resolution:**
1. Note listed devices and agents
2. Reassign devices to different Director or delete
3. Reassign agents to different Director or delete
4. Retry Director deletion after dependencies removed

## Agent Pre-Processing Management

Directors can configure Agents to perform pipeline-based pre-processing of logs before transmission. This distributed processing model reduces Director workload and enables edge-based data transformation.

### Architecture

**Processing Flow with Agent Pre-Processing:**

1. **Agent Collection** - Agent collects logs locally at endpoint
2. **Agent Processing** - Agent executes configured pipeline transformations
3. **Agent Transmission** - Agent sends pre-processed data to Director
4. **Director Routing** - Director forwards data to targets (optional additional processing)

**Processing Flow without Agent Pre-Processing:**

1. **Agent Collection** - Agent collects logs locally at endpoint
2. **Agent Transmission** - Agent sends raw data to Director
3. **Director Processing** - Director executes pipeline transformations
4. **Director Routing** - Director forwards processed data to targets

### Configuration

Agent pre-processing is configured through device settings in the Director interface:

**Configuration Location:**
- Navigate to **Home** > **Fleet Management** > **Devices**
- Select the Agent device to configure
- Assign pipeline to device configuration
- Pipeline executes on Agent before data transmission

**Pipeline Assignment:**
- Same pipeline syntax as Director pipelines
- All processor types available for Agent execution
- Configuration managed centrally through Director
- Changes synchronized automatically to Agents

### Pre-Processing Use Cases

**High-Volume Log Filtering:**
- Filter non-essential logs at collection point
- Reduce network bandwidth consumption
- Distribute processing load across Agents
- Improve Director scalability

**Edge-Based Compliance:**
- Mask sensitive data (PII, credentials) at source
- Apply regulatory transformations before transmission
- Ensure compliance before data leaves endpoint
- Support data sovereignty requirements

**Distributed Processing:**
- Process data locally in remote offices
- Minimize central Director processing load
- Support intermittent connectivity scenarios
- Optimize infrastructure costs

### Pipeline Distribution

Distribute processing between Agents and Directors based on operation type:

| Operation Type | Execute On | Reason |
|----------------|------------|--------|
| Filtering, sampling, field removal | Agent | Reduces network bandwidth |
| GeoIP lookups, threat intelligence | Director | Requires external resources |
| Lightweight transformations | Agent | Edge processing efficiency |
| Computationally intensive operations | Director | Better resource availability |

:::tip
Configure pipelines centrally through the Director interface. Changes synchronize automatically to Agents via hot configuration reload.
:::

## Notifications

The Directors interface provides automatic notifications for all operations:

### Success

Success messages auto-dismiss after 10 seconds. These include confirmations for Director creation (connected or pending), enabling, disabling, and deletion. Hover to pause the auto-close timer, or click X to dismiss manually.

### Errors

Error notifications persist until manually dismissed. These include failures for enable, disable, delete operations, and configuration download errors. Review error details and take corrective action before dismissing.

## Clusters

Clusters group multiple Directors together for high availability. When one Director fails, the remaining Directors automatically take over its workload. Agents and Devices connect to the cluster as a whole, ensuring continuous operation as long as at least one Director remains healthy.

:::warning[Permanent Assignment]
Once a Director is added to a cluster, it cannot be individually modified, updated, or removed. All configuration changes must be made at the cluster level. The only way to release a Director from a cluster is to delete the entire cluster, after which the Director returns to standalone status.
:::

### Access

The Directors page displays two tabs: **Directors** and **Clusters**. Click the **Clusters** tab to manage cluster configurations. The Clusters tab requires CLUSTER_READ permission.

### Overview

The Clusters table displays all configured clusters with the following columns:

| Column | Description |
|:-------|:------------|
| Name | Cluster identifier |
| Type | Management type (Managed or Self-Managed) |
| Status | Operational state (Enabled/Disabled) |
| Directors | Count showing healthy vs total (e.g., "2 up 1 down") |
| Actions | Menu for cluster operations |

**Table Controls:**

Filter clusters using **Search clusters** (by name) and **Status** dropdown (All, Enabled, Disabled). The <gui>Refresh</gui> button reloads table data. Click <gui>Create cluster</gui> to launch the creation wizard (requires CLUSTER_CREATE permission).

### Create Cluster Wizard

The cluster creation process guides you through a 3-step wizard.

#### Step 1: Cluster Details

**Basic Configuration:**

1. **Cluster Name** - Unique identifier for the cluster
2. **Port** - Communication port for cluster coordination (default: 8081)
3. **Type** - Management approach:
   - **Managed**: VirtualMetric manages cluster infrastructure
   - **Self-Managed**: User controls cluster deployment and configuration

**Director Selection:**

Select Directors to include in the cluster. Requirements:
- Minimum 3 Directors, maximum 15
- Must be an odd number (3, 5, 7...) for quorum
- Directors must match cluster type (Managed or Self-Managed)
- Only Directors with "Connected" status can be added
- Only Directors not previously configured can be added

For each Director, specify:
- **Director** - Select from available Directors dropdown
- **IP Address** - Auto-populated from Director configuration
- **Port** - Communication port (auto-populated, editable)

:::note
Directors already assigned to a cluster or previously configured are not available for selection.
:::

#### Step 2: Cluster Configuration

**TLS Settings:**

Configure encrypted communication between cluster members:

- **Enable TLS** - Toggle to enable/disable TLS encryption
- **Certificate** - TLS certificate content (required if TLS enabled)
- **Private Key** - TLS private key content (required if TLS enabled)

#### Step 3: Access Management

**Access Restriction:**

Restrict which IP addresses can connect to the cluster:

- **Enable Access Restriction** - Toggle to enable IP filtering
- **Restriction Type**:
  - **Single Block** - Single IP address
  - **Range** - IP address range (start-end)
  - **CIDR** - CIDR notation (e.g., 10.0.0.0/8)
- **Sources** - List of allowed IP addresses/ranges

**Access Tokens:**

Create authentication tokens for Agents and Devices connecting to the cluster:

- **Enable Access Tokens** - Toggle to require token authentication
- **Token Name** - Identifier for the token
- **Token Value** - Auto-generated when token is created (use copy button to copy)
- **Expiration** - Token validity period (default: 3 months):
  - 1 month
  - 3 months
  - 1 year
  - Unlimited

Click <gui>Add Cluster</gui> to complete cluster creation.

### Detail View

Clicking a cluster from the overview table opens the detailed management interface with four tabbed panels.

#### Cluster Details Tab

View cluster configuration and Director membership:

**Cluster Information:**
- **Name** - Cluster identifier
- **Type** - Managed or Self-Managed
- **Port** - Cluster communication port
- **Status** - Enabled or Disabled

**Directors Table:**

Lists all Directors in the cluster with:
- **Name** - Director identifier
- **IP Address** - Director network address
- **Port** - Director communication port
- **Status** - Connection status (Connected/Not Connected)

#### Cluster Configuration Tab

View and edit TLS settings:

- **TLS Status** - Enabled or Disabled
- **Certificate** - Current certificate content
- **Private Key** - Current private key content

Click <gui>Edit</gui> to modify TLS configuration.

#### Access Management Tab

View and edit access controls:

**Access Restriction:**
- Current restriction status and configured sources
- Edit to add, remove, or modify IP restrictions

**Access Tokens:**
- List of configured tokens with expiration dates
- Create new tokens or revoke existing tokens

#### Cluster Activity Logs Tab

Track cluster operations and lifecycle events:

| Column | Description |
|:-------|:------------|
| User | Email of user who performed action |
| User IP | IP address from which action was performed |
| Object Type | Always "Cluster" for this view |
| Object | Name of affected cluster |
| Action | Operation performed |
| Action Description | Detailed description |
| Created At | Timestamp of action |

**Action Types:**
- CreatedCluster - New cluster created
- UpdatedCluster - Cluster configuration modified
- DeletedCluster - Cluster removed

### Cluster Operations

#### Enable / Disable

To change cluster status:

1. Navigate to cluster detail view or use Actions menu from overview
2. Click **Actions** menu
3. Select <gui>Enable Cluster</gui> or <gui>Disable Cluster</gui>
4. Confirmation notification confirms status change

Disabling a cluster also disables all member Directors. Re-enabling restores previous Director states.

#### Download Config

**For Self-Managed Clusters:**

Download the cluster configuration file:

1. Navigate to cluster detail view
2. Click **Actions** menu
3. Select <gui>Download Config</gui>
4. Deploy downloaded configuration to each Director in the cluster

#### Delete

**Delete Cluster Process:**

1. Navigate to cluster detail view or use Actions menu
2. Click **Actions** menu
3. Select <gui>Delete Cluster</gui>
4. Confirm deletion in modal dialog

:::warning
Clusters with assigned Devices cannot be deleted. Reassign or remove all Devices from cluster Directors before deletion.
:::

Deleting a cluster also removes all Director associations. The Directors themselves are not deleted but return to standalone status.
