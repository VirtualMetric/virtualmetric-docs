---
description: Minifies XML, JSON, and HTML content for performance optimization
sidebar_custom_props: 
  customIcon: üóúÔ∏è
  customCategory: Analytics
---

# Minify

<span className="theme-doc-version-badge badge badge--primary">Data Processing</span><span className="theme-doc-version-badge badge badge--secondary">Content Optimization</span><span className="theme-doc-version-badge badge badge--secondary">Performance</span>

## Synopsis

A content optimization processor that minifies XML, JSON, and HTML documents by removing unnecessary whitespace, comments, and other non-essential elements to reduce file size and improve performance.

## Schema

```yaml {1-3}
- minify:
  field: <ident>
  format: <enum>
  target_field: <ident>
  keep_whitespace: <boolean>
  keep_comments: <boolean>
  description: <text>
  if: <script>
  ignore_failure: <boolean>
  ignore_missing: <boolean>
  keep_end_tags: <boolean>
  keep_document_tags: <boolean>
  on_failure: <processor[]>
  on_success: <processor[]>
  tag: <string>
```

## Configuration

The following fields are used to define the processor:

|Field|Required|Default|Description|
|---|---|---|---|
|`field`|Y|-|Field containing the content to minify|
|`format`|Y|-|Content format: `xml`, `json`, or `html`|
|`target_field`|N|`field`|Field to store the minified content|
|`keep_whitespace`|N|`false`|Preserve whitespace in content|
|`keep_comments`|N|`false`|Preserve comments in content|
|`keep_end_tags`|N|`false`|Preserve end tags in HTML (HTML only)|
|`keep_document_tags`|N|`false`|Preserve document tags in HTML (HTML only)|
|`description`|N|-|Explanatory note|
|`if`|N|-|Condition to run|
|`ignore_failure`|N|`false`|Continue if minification fails|
|`ignore_missing`|N|`false`|Continue if source field doesn't exist|
|`on_failure`|N|-|See [Handling Failures](../handling-failures.mdx)|
|`on_success`|N|-|See [Handling Success](../handling-success.mdx)|
|`tag`|N|-|Identifier|

## Details

The processor provides content minification for three primary formats: XML, JSON, and HTML. Each format has specific optimization strategies tailored to its structure and common use cases.

:::note
Minification is irreversible - ensure you preserve original content if needed.
:::

XML minification removes unnecessary whitespace between elements while preserving content integrity. JSON minification eliminates all non-essential whitespace and formatting. HTML minification offers comprehensive optimization including whitespace removal, comment deletion, and optional tag optimization.

Format-specific options provide fine-grained control over minification behavior. HTML-specific options like `keep_end_tags` and `keep_document_tags` allow preservation of structural elements when required.

:::warning
Test minified content thoroughly as some applications may depend on specific formatting.
:::

## Examples

### XML Minification

<ExampleGrid>
  <CommentCol>
    Minifying XML content...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "xml_data": "<?xml version=\"1.0\"?>\n<root>\n  <item>value</item>\n  <!-- comment -->\n</root>"
    }
    ```
    ```yaml
    processors:
      - minify:
        field: xml_data
        format: xml
        target_field: minified_xml
    ```
  </CodeCol>
  <CommentCol>
    produces compact XML:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "xml_data": "<?xml version=\"1.0\"?>\n<root>\n  <item>value</item>\n  <!-- comment -->\n</root>",
      "minified_xml": "<?xml version=\"1.0\"?><root><item>value</item></root>"
    }
    ```
  </CodeCol>
</ExampleGrid>

### JSON Minification

<ExampleGrid>
  <CommentCol>
    Compacting JSON data...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "json_content": "{\n  \"name\": \"example\",\n  \"value\": 123,\n  \"nested\": {\n    \"key\": \"data\"\n  }\n}"
    }
    ```
    ```yaml
    processors:
      - minify:
        field: json_content
        format: json
    ```
  </CodeCol>
  <CommentCol>
    removes all formatting:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "json_content": "{\"name\":\"example\",\"value\":123,\"nested\":{\"key\":\"data\"}}"
    }
    ```
  </CodeCol>
</ExampleGrid>

### HTML Minification

<ExampleGrid>
  <CommentCol>
    Optimizing HTML content...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "html_page": "<!DOCTYPE html>\n<html>\n  <head>\n    <title>Example</title>\n  </head>\n  <body>\n    <!-- Main content -->\n    <div class=\"container\">\n      <p>Hello World</p>\n    </div>\n  </body>\n</html>"
    }
    ```
    ```yaml
    processors:
      - minify:
        field: html_page
        format: html
        target_field: optimized_html
    ```
  </CodeCol>
  <CommentCol>
    creates compact HTML:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "html_page": "<!DOCTYPE html>\n<html>\n  <head>\n    <title>Example</title>\n  </head>\n  <body>\n    <!-- Main content -->\n    <div class=\"container\">\n      <p>Hello World</p>\n    </div>\n  </body>\n</html>",
      "optimized_html": "<!doctype html><html><head><title>Example</title><body><div class=container><p>Hello World"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Preserving Comments

<ExampleGrid>
  <CommentCol>
    Minifying while keeping comments...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "xml_with_comments": "<config>\n  <!-- Important setting -->\n  <setting>value</setting>\n</config>"
    }
    ```
    ```yaml
    processors:
      - minify:
        field: xml_with_comments
        format: xml
        keep_comments: true
        keep_whitespace: false
    ```
  </CodeCol>
  <CommentCol>
    preserves important comments:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "xml_with_comments": "<config><!-- Important setting --><setting>value</setting></config>"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Conditional Minification

<ExampleGrid>
  <CommentCol>
    Minifying based on content size...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "large_json": "{\n  \"data\": \"large content here\"\n}",
      "content_size": 1024
    }
    ```
    ```yaml
    processors:
      - minify:
        field: large_json
        format: json
        if: "content_size > 500"
        target_field: compressed_json
    ```
  </CodeCol>
  <CommentCol>
    applies minification when needed:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "large_json": "{\n  \"data\": \"large content here\"\n}",
      "content_size": 1024,
      "compressed_json": "{\"data\":\"large content here\"}"
    }
    ```
  </CodeCol>
</ExampleGrid>

### HTML with Preserved Structure

<ExampleGrid>
  <CommentCol>
    Minifying HTML while keeping structure...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "template": "<html>\n<head></head>\n<body>\n  <main>Content</main>\n</body>\n</html>"
    }
    ```
    ```yaml
    processors:
      - minify:
        field: template
        format: html
        keep_end_tags: true
        keep_document_tags: true
        target_field: clean_template
    ```
  </CodeCol>
  <CommentCol>
    maintains essential HTML structure:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "template": "<html>\n<head></head>\n<body>\n  <main>Content</main>\n</body>\n</html>",
      "clean_template": "<html><head></head><body><main>Content</main></body></html>"
    }
    ```
  </CodeCol>
</ExampleGrid>
