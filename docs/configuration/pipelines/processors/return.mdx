---
description: Finalizes processing and prevents further pipeline execution
sidebar_custom_props:
  customCategory: Flow Control
  customIcon: ⏹️
---

# Return

<span className="theme-doc-version-badge badge badge--primary">Control Flow</span><span className="theme-doc-version-badge badge badge--secondary">Pipeline</span>

## Synopsis

Drops the current event from processing and prevents pipeline execution.

## Schema

```yaml
- return:
    description: <text>
    if: <script>
    ignore_failure: <boolean>
    on_failure: <processor[]>
    on_success: <processor[]>
    tag: <string>
```

## Configuration

The following fields are used to define the processor:

|Field|Required|Default|Description|
|---|---|---|---|
|`description`|N|-|Explanatory note|
|`if`|N|-|Condition to run|
|`ignore_failure`|N|`false`|Continue processing if operation fails|
|`on_failure`|N|-|See <Topic id="handling-failures">Handling Failures</Topic>|
|`on_success`|N|-|See <Topic id="handling-success">Handling Success</Topic>|
|`tag`|N|-|Identifier|

## Details

Drops the current event from processing by returning an error that signals the pipeline to discard the event. When this processor executes, the event is not sent to any configured targets and no further processors run.

:::note
The `return` processor immediately stops pipeline execution. Any processors defined after a return statement will not be executed unless the return is conditional and the condition is not met.
:::

This processor is used for filtering unwanted events, implementing conditional drop logic, preventing specific data from reaching downstream systems, or optimizing performance by skipping unnecessary processing for certain event types.

The event is dropped after any `on_success` processors execute, allowing for cleanup operations, logging, or metrics collection before the event is discarded.

:::note Return vs Final
Both `return` and `final` processors drop events from processing. Use `return` for conditional filtering and early exit logic. The <Topic id="final">`final`</Topic> processor provides identical functionality with different semantics for graceful pipeline termination.
:::

:::warning
The `return` processors with success/failure chains will execute those chains before dropping the event. This allows for cleanup operations, logging, or metrics collection, but the event will still be discarded and not sent to any targets.
:::

## Examples

### Event Filtering

<ExampleGrid>
  <CommentCol>
    Dropping events after marking as processed...
  </CommentCol>
  <CodeCol>
    ```yaml
    - set:
        field: processed
        value: true
    - return:
        description: "Drop event after marking"
    - set:
        field: additional_processing
        value: true
    ```
  </CodeCol>
  <CommentCol>
    event is dropped, remaining processors skipped:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "processed": true
    }
    ```
  </CodeCol>
</ExampleGrid>

### Conditional Event Filtering

<ExampleGrid>
  <CommentCol>
    Filtering events based on skip flag...
  </CommentCol>
  <CodeCol>
    ```yaml
    - return:
        if: "logEntry.skip_processing == true"
        description: "Drop events marked for skipping"
    - set:
        field: full_processing
        value: true
    - enrich:
        field: user_id
        target: user_details
    ```
  </CodeCol>
  <CommentCol>
    event is dropped when condition matches:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "skip_processing": true
    }
    ```
  </CodeCol>
</ExampleGrid>

### Drop on Validation Failure

<ExampleGrid>
  <CommentCol>
    Dropping events that fail validation...
  </CommentCol>
  <CodeCol>
    ```yaml
    - validate:
        field: required_field
        exists: true
        on_failure:
          - set:
              field: error
              value: "Missing required field"
          - return:
              description: "Drop invalid events"
    - set:
        field: validation_passed
        value: true
    ```
  </CodeCol>
  <CommentCol>
    event is dropped on validation failure:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "error": "Missing required field"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Drop with Metrics Collection

<ExampleGrid>
  <CommentCol>
    Recording metrics before dropping event...
  </CommentCol>
  <CodeCol>
    ```yaml
    - return:
        description: "Drop event with metrics"
        on_success:
          - set:
              field: drop_timestamp
              value: "{{now}}"
          - set:
              field: drop_reason
              value: "filtered_event"
    ```
  </CodeCol>
  <CommentCol>
    records metadata before event is dropped:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "drop_timestamp": "2024-01-15T10:30:00Z",
      "drop_reason": "filtered_event"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Filter Debug Logs

<ExampleGrid>
  <CommentCol>
    Filtering debug logs in production...
  </CommentCol>
  <CodeCol>
    ```yaml
    - return:
        if: "logEntry.log_level == 'DEBUG' && logEntry.environment == 'production'"
        description: "Drop debug logs in production"
        on_success:
          - set:
              field: filtered_out
              value: true
    - enrich:
        field: log_data
        target: enriched_data
    - complex_analysis:
        field: enriched_data
    ```
  </CodeCol>
  <CommentCol>
    debug events are dropped, expensive processing skipped:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "log_level": "DEBUG",
      "environment": "production",
      "filtered_out": true
    }
    ```
  </CodeCol>
</ExampleGrid>

### Tiered Event Filtering

<ExampleGrid>
  <CommentCol>
    Filtering events based on priority tiers...
  </CommentCol>
  <CodeCol>
    ```yaml
    - return:
        if: "logEntry.priority == 'low'"
        description: "Drop low priority events"
        on_success:
          - set:
              field: processing_level
              value: "minimal"
    - return:
        if: "logEntry.priority == 'medium'"
        description: "Drop medium priority events"
        on_success:
          - set:
              field: processing_level
              value: "standard"
    - set:
        field: processing_level
        value: "full"
    - advanced_processing:
        field: data
    ```
  </CodeCol>
  <CommentCol>
    low and medium priority events dropped, only high priority proceeds:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "priority": "medium",
      "processing_level": "standard"
    }
    ```
  </CodeCol>
</ExampleGrid>