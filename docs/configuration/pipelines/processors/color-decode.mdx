---
description: Processes and converts between different color format representations
sidebar_custom_props:
  customCategory: Decode
  customIcon: ðŸŽ¨
---

# Color Decode

<span className="theme-doc-version-badge badge badge--primary">Parse</span><span className="theme-doc-version-badge badge badge--secondary">Data Analysis</span>

## Synopsis

Processes and converts between different color format representations.

## Schema

```yaml {2-4}
- color_decode:
    field: <ident>
    output_format: <string>
    target_field: <string>
    input_format: <string>
    alpha: <number>
    uppercase: <boolean>
    short_hex: <boolean>
    percent_rgb: <boolean>
    description: <text>
    if: <script>
    ignore_failure: <boolean>
    ignore_missing: <boolean>
    on_failure: <processor[]>
    on_success: <processor[]>
    tag: <string>
```

## Configuration

The following fields are used to define the processor:

|Field|Required|Default|Description|
|---|---|---|---|
|`field`|Y|-|Source field containing color data to convert|
|`output_format`|Y|-|Target color format: `hex`, `rgb`, `rgba`, `hsl`, `hsla`, `hsv`, `hsva`, `name`, `rgb_array`, `hsl_array`, `hsv_array`|
|`target_field`|N|Same as `field`|Target field to store converted color|
|`input_format`|N|`auto`|Input color format: `auto`, `hex`, `rgb`, `hsl`, `hsv`, `name`|
|`alpha`|N|`1.0`|Default alpha value for formats requiring transparency (0-1)|
|`uppercase`|N|`false`|Output hex values in uppercase|
|`short_hex`|N|`false`|Output 3-character hex when possible (e.g., "#f00" vs "#ff0000")|
|`percent_rgb`|N|`false`|Output RGB values as percentages instead of 0-255|
|`description`|N|-|Explanatory note|
|`if`|N|-|Condition to run|
|`ignore_failure`|N|`false`|Continue processing if conversion fails|
|`ignore_missing`|N|`false`|Skip processing if referenced field doesn't exist|
|`on_failure`|N|-|See <Topic id="handling-failures">Handling Failures</Topic>|
|`on_success`|N|-|See <Topic id="handling-success">Handling Success</Topic>|
|`tag`|N|-|Identifier|

## Details

Converts color values between various common color formats including hex, RGB, HSL, HSV, and named colors. The processor can automatically detect the input format or work with explicitly specified formats.

The processor supports both simple color conversion and advanced options like alpha channel handling, percentage-based RGB values, and shortened hex notation.

:::note
When `input_format` is set to "auto", the processor attempts to automatically detect the color format based on the input string pattern. This works with most common color representations.
:::

The output format determines the structure of the converted color value. Array formats (like `rgb_array`) return numerical arrays, while string formats return formatted color strings.

:::warning
If the input color cannot be parsed or converted to the specified output format, the processor will fail unless `ignore_failure` is set to `true`. Invalid color names or malformed color values will trigger errors.
:::

## Examples

### Hex to RGB Conversion

<ExampleGrid>
  <CommentCol>
    Converting hexadecimal color to RGB format...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "color_value": "#ff5733"
    }
    ```
    ```yaml
    - color_decode:
        field: color_value
        output_format: rgb
        target_field: rgb_color
    ```
  </CodeCol>
  <CommentCol>
    converts to RGB notation:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "color_value": "#ff5733",
      "rgb_color": "rgb(255, 87, 51)"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Named Color to Hex

<ExampleGrid>
  <CommentCol>
    Converting color name to hexadecimal...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "ui_color": "red"
    }
    ```
    ```yaml
    - color_decode:
        field: ui_color
        output_format: hex
        uppercase: true
    ```
  </CodeCol>
  <CommentCol>
    converts to uppercase hex:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "ui_color": "red",
      "ui_color": "#FF0000"
    }
    ```
  </CodeCol>
</ExampleGrid>

### RGB to HSL with Alpha

<ExampleGrid>
  <CommentCol>
    Converting RGB to HSL with alpha channel...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "theme_color": "rgb(100, 150, 200)"
    }
    ```
    ```yaml
    - color_decode:
        field: theme_color
        output_format: hsla
        alpha: 0.8
        target_field: hsl_color
    ```
  </CodeCol>
  <CommentCol>
    adds alpha and converts to HSLA:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "theme_color": "rgb(100, 150, 200)",
      "hsl_color": "hsla(210, 48%, 59%, 0.8)"
    }
    ```
  </CodeCol>
</ExampleGrid>

### Color to Array Format

<ExampleGrid>
  <CommentCol>
    Converting color to numerical array...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "brand_color": "#3498db"
    }
    ```
    ```yaml
    - color_decode:
        field: brand_color
        output_format: rgb_array
        target_field: color_values
    ```
  </CodeCol>
  <CommentCol>
    outputs RGB as array:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "brand_color": "#3498db",
      "color_values": [52, 152, 219]
    }
    ```
  </CodeCol>
</ExampleGrid>

### Percentage RGB Output

<ExampleGrid>
  <CommentCol>
    Converting to RGB with percentage values...
  </CommentCol>
  <CodeCol>
    ```json
    {
      "accent_color": "#80ff80"
    }
    ```
    ```yaml
    - color_decode:
        field: accent_color
        output_format: rgb
        percent_rgb: true
        target_field: percent_color
    ```
  </CodeCol>
  <CommentCol>
    outputs RGB as percentages:
  </CommentCol>
  <CodeCol>
    ```json
    {
      "accent_color": "#80ff80",
      "percent_color": "rgb(50%, 100%, 50%)"
    }
    ```
  </CodeCol>
</ExampleGrid>